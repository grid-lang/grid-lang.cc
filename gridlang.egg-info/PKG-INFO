Metadata-Version: 2.4
Name: gridlang
Version: 0.1
Summary: A Python-based tool for compiling and processing .grid files
Home-page: https://github.com/grid-lang/grid-lang.cc
Author: GridLang Team
License: LGPLv3.0
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: GNU Lesser General Public License v3 (LGPLv3)
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE.md
Requires-Dist: pyarrow
Dynamic: author
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: home-page
Dynamic: license
Dynamic: license-file
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# GridLang

GridLang is a Python-based tool for compiling and processing `.grid` files. This repository contains the source code for the `grid` command-line tool, which uses the `GridLangCompiler` to process input files, handle inputs/outputs, run tests, and optionally export results to CSV format.

## Prerequisites

- **Python**: Version 3.7 or higher (tested with Python 3.11).
- **pip**: Python package manager (included with Python).
- **Git**: For cloning the repository (optional if downloading as a ZIP).
- **pyarrow**: Required dependency for data handling.
- **PyInstaller**: Optional, for creating a standalone `grid.exe` executable.

## Installation

Follow these steps to clone or download the `grid-lang.cc` repository, install the package, and run the `grid` command.

### 1. Clone or Download the Repository

#### Option 1: Clone with Git

1. Open a terminal or command prompt.
2. Clone the repository using:

   ```bash
   git clone https://github.com/grid-lang/grid-lang.cc.git
   ```

3. Navigate to the project directory:
   ```bash
   cd grid-lang.cc
   ```

#### Option 2: Download as ZIP

1. Go to the repositoryâ€™s webpage (e.g., on GitHub).
2. Click the green **Code** button and select **Download ZIP**.
3. Extract the ZIP file to a folder (e.g., `grid-lang.cc`).
4. Navigate to the project directory in a terminal:
   ```bash
   cd path/to/grid-lang.cc
   ```

### 2. Set Up a Virtual Environment (Recommended)

To avoid conflicts with other Python packages, use a virtual environment:

```bash
python -m venv venv
venv\Scripts\activate  # On Windows
source venv/bin/activate  # On macOS/Linux
```

### 3. Install the Package

#### Option 1: Install with `setup.py`

Install the package and its dependencies using `setuptools`:

```bash
pip install .
```

This installs the `gridlang` package, its dependency (`pyarrow`), and creates the `grid` command in your Python environmentâ€™s `Scripts` directory (e.g., `C:\Users\johndoe\AppData\Local\Programs\Python\Python311\Scripts` on Windows). The entry point is defined in `setup.py` as `grid=main:main`.

#### Option 2: Create a Standalone Executable with PyInstaller

1. Install PyInstaller:
   ```bash
   pip install pyinstaller
   ```
2. Build the `grid.exe` executable:
   ```bash
   pyinstaller \
     --add-data "main.py;." \
     --add-data "compiler.py;." \
     --add-data "array_handler.py;." \
     --add-data "expression.py;." \
     --add-data "utils.py;." \
     --add-data "scope.py;." \
     --add-data "control_flow.py;." \
     --add-data "type_processor.py;." \
     --add-data "parser.py;." \
     --add-data "executor.py;." \
     --name grid main.py
   ```
3. The executable will be created in `dist\grid\grid.exe`.

### 4. Verify Installation

#### For `setup.py` Installation

Check that the `grid` command is available:

```bash
grid --help
```

This should display:

```
Usage: grid <filename.grid> [--debug]
```

If you see a `command not found` error, add the Python `Scripts` directory to your PATH:

- On Windows:
  ```bash
  set PATH=%PATH%;C:\Users\johndoe\AppData\Local\Programs\Python\Python311\Scripts
  ```
- On macOS/Linux:
  ```bash
  export PATH=$PATH:$HOME/.local/bin
  ```

#### For PyInstaller

Test the executable:

```bash
dist\grid\grid.exe example.grid
```

## Usage

The `grid` command processes `.grid` files using the `GridLangCompiler`. It supports two primary modes:

- **Run a `.grid` program**: Processes the input file, accepts positional program arguments, and prints results.
- **Debug mode**: Adds `--debug` to also export the computed values (variables and grid cells) to a CSV file via `export_to_csv`.
- **Test mode**: When not providing a `.grid` file as the first argument (or when using flags), test utilities run via `GridLangTestRunner`.

### Example Commands

1. **Run a `.grid` file**:

   ```bash
   grid example.grid
   ```

   or, for PyInstaller:

   ```bash
   dist\grid\grid.exe example.grid
   ```

2. **Run with debug mode**:

   ```bash
   grid example.grid --debug

   ```

3. **Run with program arguments** (passed to your Grid program as inputs):

   ```bash
   grid binsearch.grid 22
   ```

4. **Run in test mode**:

   - Provide test names or identifiers to run them via the built-in test runner:

   ```bash
   grid MyTestName AnotherTest
   ```

   - Or run the contents of a `.grid` file directly in a minimal runner using `-r`:

   ```bash
   grid -r example.grid
   ```

   ```

   ```

### Creating a Sample `.grid` File

Create a file named `example.grid` in the `grid-lang.cc` directory:

```
A1 = 42
B2 = "Hello"
```

Then run:

```bash
grid example.grid
```

### Expected Output

```
A1 = 42
B2 = Hello
```

## Project Structure

```
grid-lang.cc/
â”œâ”€â”€ setup.py           # Package configuration and entry point (grid=main:main)
â”œâ”€â”€ main.py            # CLI entry point; routes to program or test mode
â”œâ”€â”€ compiler.py        # GridLangCompiler orchestration
â”œâ”€â”€ executor.py        # Core execution engine used by compiler.run
â”œâ”€â”€ parser.py          # Parsing helpers for types/dimensions
â”œâ”€â”€ type_processor.py  # Type definition parsing and execution
â”œâ”€â”€ control_flow.py    # FOR/loop and control-flow handling
â”œâ”€â”€ scope.py           # Variable scoping, inputs/outputs, constraints
â”œâ”€â”€ expression.py      # Expression parsing/evaluation
â”œâ”€â”€ array_handler.py   # Array operations, dimensions, labels
â”œâ”€â”€ utils.py           # Utility helpers (cell refs, column/row math)
â”œâ”€â”€ example.grid       # Example GridLang program
â”œâ”€â”€ binsearch.grid     # Example program using arguments
â”œâ”€â”€ example.csv        # Example CSV output (debug)
â”œâ”€â”€ README.md          # This file
â””â”€â”€ build/             # Build artifacts (if present)
```

## Troubleshooting

- **`grid --help` output**: If you need to see supported flags and examples, run:
  ```bash
  grid --help
  ```
- **PyInstaller build misses modules**: Ensure you include all modules listed in the PyInstaller step above, or prefer a spec file. Alternatively, a simple `pyinstaller main.py -n grid` generally discovers imports automatically.
- **Error: `Unable to create process ... The system cannot find the file specified`**:
  - Verify Python is installed at `C:\Users\johndoe\AppData\Local\Programs\Python\Python311` or `C:\Python313`.
  - Install PyInstaller:
    ```bash
    pip install pyinstaller
    ```
  - Add Python and Scripts to PATH:
    ```bash
    set PATH=%PATH%;C:\Users\johndoe\AppData\Local\Programs\Python\Python311;C:\Users\johndoe\AppData\Local\Programs\Python\Python311\Scripts
    ```
- **Error: `ModuleNotFoundError: No module named 'pyarrow'`**:
  - Install `pyarrow`:
    ```bash
    pip install pyarrow
    ```

## Development

1. Edit modules such as `main.py`, `compiler.py`, `executor.py`, `parser.py`, `type_processor.py`, `control_flow.py`, `scope.py`, `array_handler.py`, `expression.py`, or `utils.py`.
2. Reinstall (`pip install .`) or rebuild with PyInstaller.
3. Test by running a program:
   ```bash
   python main.py example.grid
   ```
4. Or run with arguments / debug:
   ```bash
   python main.py binsearch.grid 22 --debug
   ```

## License

LGPLv3.0

## Contact

Open an issue or pull request on the `grid-lang.cc` repository.
